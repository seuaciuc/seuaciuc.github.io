<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>CS416 Summer 2023: Narrative Visualization</title>
    </head>
    <script src='https://d3js.org/d3.v5.min.js'></script>
    <!--<style> circle {fill: lightblue; stroke: black;} </style>-->
    <style>
      #tooltip {
        opacity:0;
        position:absolute;
        text-align:left;
        width: 160px; height: 80px;
        background: none;
        border: 0px;
        left: 300px;
        top: 500px;
      }
    </style>
    
 <!--   <body onload='init()'> -->
    <body>

        <h1>The Car Market in 2017 from a Fuel Economy Perspective</h1>

        <p>trying tooltip formatting...</p>
        
        <div id="tooltip"></div>
        <svg width=500 height=650>
        </svg>
        <script>
          //  async function init() {
                // data
                var citympg = [25,21,24,17,12,23,19,17,14,24,13,12,30,23,36,28,23,19,15,13,20,23,18,22,17,14,22,18,15,21,21,15,27,17,15,16,23,20,15,14,12,19,18,16,12,26,22,19,11,14,29,24,17,15,17,15,17,21,20,17,15,30,29,19,27,18,22,20,15,25,30,21,18,15,19,14,24,13,21,17,15,27,18,14,10,22,20,17,14,22,21,16,39,20,23,16,17,16,14,26,27,16,23,19,16,13,24,20,35,24,26,18,26,18,14,21,19,14,14,21,17,12,14,32,21,25,20,23,32,20,13,21,24,18,22,23];
                var hwympg = [35,28,33,24,19,30,27,26,22,32,22,20,41,29,33,29,32,28,23,20,27,31,26,30,25,21,32,26,21,29,31,23,34,24,21,25,36,29,24,23,19,25,27,22,16,34,30,25,18,21,40,31,23,22,24,23,27,29,27,23,21,38,37,28,34,25,30,27,22,27,39,30,26,23,27,22,31,19,27,22,23,33,25,21,17,28,27,23,19,30,28,22,36,28,29,24,24,24,20,34,35,23,30,25,22,20,33,27,42,31,31,26,33,25,20,27,26,21,21,28,24,19,23,39,27,33,28,30,35,25,18,28,33,25,29,32];
                var cyl = [4,6,4,6,12,4,6,8,10,4,8,12,4,6,2,3,4,6,8,12,4,4,6,4,6,8,4,6,8,4,4,8,4,6,8,8,4,6,8,8,10,4,6,8,12,4,4,4,6,8,3,4,6,8,6,8,6,4,4,6,8,4,4,6,4,6,4,6,8,4,4,4,6,8,6,8,4,8,4,6,8,4,6,10,12,6,4,6,8,4,6,8,4,6,4,6,6,6,8,4,4,8,4,6,8,12,4,6,3,4,4,6,4,6,8,4,6,8,8,4,6,12,8,3,4,4,6,4,4,6,8,4,4,6,4,4];
                var continent = ["Asia","Asia","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","North America","North America","North America","North America","North America","North America","North America","North America","North America","North America","North America","North America","North America","North America","North America","North America","North America","North America","North America","North America","North America","North America","North America","Europe","Europe","Europe","Europe","North America","North America","North America","North America","North America","North America","North America","Asia","Asia","Asia","North America","North America","North America","North America","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Europe","Europe","Europe","Europe","North America","North America","North America","North America","North America","North America","Asia","Asia","Asia","Europe","Europe","Europe","Europe","Europe","Europe","Asia","Asia","Asia","Asia","Asia","North America","North America","Europe","Europe","Europe","Asia","Asia","Europe","Europe","Europe","Europe","Europe","Europe","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Europe","Europe","Europe","North America","North America","North America","Europe","North America","Europe","Asia","Asia","Asia","Asia","Asia","Asia","Asia","Europe","Europe","Europe","Europe","Europe"];
                var make = ["Acura","Acura","Alfa Romeo","Alfa Romeo","Aston Martin","Audi","Audi","Audi","Audi","Audi","Bentley","Bentley","BMW","BMW","BMW","BMW","BMW","BMW","BMW","BMW","Buick","Buick","Buick","Cadillac","Cadillac","Cadillac","Cadillac","Cadillac","Cadillac","Chevrolet","Chevrolet","Chevrolet","Chevrolet","Chevrolet","Chevrolet","Chrysler","Chrysler","Chrysler","Dodge","Dodge","Dodge","Dodge","Dodge","Ferrari","Ferrari","Fiat","Fiat","Ford","Ford","Ford","Ford","Ford","Ford","Ford","Genesis","Genesis","Genesis","GMC","GMC","GMC","GMC","Honda","Honda","Honda","Hyundai","Hyundai","Infiniti","Infiniti","Infiniti","Infiniti","Jaguar","Jaguar","Jaguar","Jaguar","Jeep","Jeep","Jeep","Jeep","Jeep","Jeep","Kia","Kia","Kia","Lamborghini","Lamborghini","Land Rover","Land Rover","Land Rover","Land Rover","Lexus","Lexus","Lexus","Lexus","Lexus","Lincoln","Lincoln","Lotus","Maserati","Maserati","Mazda","Mazda","McLaren Automotive","Mercedes-Benz","Mercedes-Benz","Mercedes-Benz","Mercedes-Benz","MINI","Mitsubishi","Mitsubishi","Mitsubishi","Nissan","Nissan","Nissan","Nissan","Nissan","Porsche","Porsche","Porsche","Ram","Ram","Ram","Rolls-Royce","Roush Performance","smart","Subaru","Subaru","Subaru","Toyota","Toyota","Toyota","Toyota","Volkswagen","Volkswagen","Volkswagen","Volvo","Volvo"];
                var country = ["Japan","Japan","Italy","Italy","England","Germany","Germany","Germany","Germany","Germany","England","England","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","USA","Italy","Italy","Italy","Italy","USA","USA","USA","USA","USA","USA","USA","South Korea","South Korea","South Korea","USA","USA","USA","USA","Japan","Japan","Japan","South Korea","South Korea","Japan","Japan","Japan","Japan","England","England","England","England","USA","USA","USA","USA","USA","USA","South Korea","South Korea","South Korea","Italy","Italy","England","England","England","England","Japan","Japan","Japan","Japan","Japan","USA","USA","England","Italy","Italy","Japan","Japan","England","Germany","Germany","Germany","Germany","England","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Germany","Germany","Germany","USA","USA","USA","England","USA","Germany","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Germany","Germany","Germany","Sweden","Sweden"];
                var fuel = ["Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Diesel","Diesel","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Diesel","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Diesel","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Diesel","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Diesel","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline","Gasoline"];

                //plot setup
                var xo = 50
                var yo = 50
                var H = 400
                var W = 400
                var xmin = 5
                var xmax = 50
                var ymin = 10
                var ymax = 50

                var tooltip = d3.select('#tooltip');
                //document.getElementById("citympg").innerHTML = citympg;

                x = d3.scaleLinear().domain([xmin,xmax]).range([0,H]);
                y = d3.scaleLinear().domain([ymin,ymax]).range([W,0]);
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .selectAll('circle')
                  .data(citympg)
                  .enter()
                  .append('circle')
                    .attr('cx',function(d,i){return x(citympg[i]);})
                    .attr('cy',function(d,i){return y(hwympg[i]);})
                    .attr('r',function(d,i){if(cyl[i]<=4){return 4;}else if(cyl[i]==6){return 8;}else{return 12;};})//{return 2+cyl[i];})
                    .style('fill',function(d,i){if(continent[i]=="Asia"){return "rgb(255,0,0)";}else if(continent[i]=="Europe"){return "rgb(0,255,0)";}else{return "rgb(0,0,255)";}})
                    //.style('stroke','black')
                    .on("mouseover",function(d,i){tooltip.style("opacity",1)
                                                         .html("Make: "+make[i]+"<br>Fuel: "+fuel[i]+"<br>Cylinders: "+cyl[i]+"<br>City MPG: "+citympg[i]+"<br>Highway MPG: "+hwympg[i]);
                                                  d3.select(this).style('stroke','black');
                                                 })
                    .on("mouseout",function(){tooltip.style("opacity",0);d3.select(this).style('stroke','none');})
                
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .call(d3.axisLeft(y).tickValues([10,20,30,40,50]).tickFormat(d3.format("~s")))
                  
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,450)")
                  .call(d3.axisBottom(x).tickValues([10,20,30,40,50]).tickFormat(d3.format("~s")))
/*
                // box around chart

                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('line')
                    .attr('x0',W)
                    .attr('y0',0)
                    .attr('x1',W)
                    .attr('y1',H)
                    .style('stroke','rgb(0,0,0)')

                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('line')
                    .attr('x0',0)
                    .attr('y0',0)
                    .attr('x1',W)
                    .attr('y1',0)
                    .style('stroke','rgb(0,0,0)')
                                                       
                
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('rect')
                    .attr('x',0)
                    .attr('y',0)
                    .attr('width',W)
                    .attr('height',H)
                    .style('stroke','rgb(0,0,0)')
                    .style('fill','none')
*/ 

                // axis titles
                // Add X axis label:
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append("text")
                    .attr("text-anchor", "middle")
                    .attr("x", 200)
                    .attr("y", 440)
                    .text("Average City Miles per Gallon");

                // Y axis label:
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append("text")
                    .attr("text-anchor", "end")
                    .attr("transform", "rotate(-90)")
                    .attr("x", -88)
                    .attr("y", -30)
                    .text("Average Highway Miles per Gallon")

                // adding legends
                // Continent legend title
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('text')
                    .attr('x',0)
                    .attr('y',475)
                    .text('Continent')
                    .attr("font-weight",700)
                    .style("font-size", "20px")
                // red legend entry
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('circle')
                    .attr('cx',0)
                    .attr('cy',500)
                    .attr('r',8)
                    .style('fill','rgb(255,0,0)')
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('text')
                    .attr('x',20)
                    .attr('y',500)
                    .text('Asia')
                    .attr("alignment-baseline","middle")
                    .style('fill','rgb(255,0,0)')
                // green legend entry
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('circle')
                    .attr('cx',0)
                    .attr('cy',525)
                    .attr('r',8)
                    .style('fill','rgb(0,255,0)')
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('text')
                    .attr('x',20)
                    .attr('y',525)
                    .text('Europe')
                    .attr("alignment-baseline","middle")
                    .style('fill','rgb(0,255,0)')
                // blue legend entry
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('circle')
                    .attr('cx',0)
                    .attr('cy',550)
                    .attr('r',8)
                    .style('fill','rgb(0,0,255)')
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('text')
                    .attr('x',20)
                    .attr('y',550)
                    .text('North America')
                    .attr("alignment-baseline","middle")
                    .style('fill','rgb(0,0,255)')
                // Engine size legend title
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('text')
                    .attr('x',200)
                    .attr('y',475)
                    .text('Engine Size')
                    .attr("font-weight",700)
                    .style("font-size", "20px")
                // size 4 legend entry
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('circle')
                    .attr('cx',200)
                    .attr('cy',500)
                    .attr('r',4)
                    .style('fill','rgb(100,100,100)')
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")  
                  .append('text')
                    .attr('x',220)
                    .attr('y',500)
                    .text('4 or fewer cylinders')
                    .attr("alignment-baseline","middle")
                // size 8 legend entry
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('circle')
                    .attr('cx',200)
                    .attr('cy',525)
                    .attr('r',8)
                    .style('fill','rgb(100,100,100)')
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('text')
                    .attr('x',220)
                    .attr('y',525)
                    .text('8 cylinders')
                    .attr("alignment-baseline","middle")
                // size 12 legend entry
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('circle')
                    .attr('cx',200)
                    .attr('cy',550)
                    .attr('r',12)
                    .style('fill','rgb(100,100,100)')
                d3.select('svg')
                  .append("g")
                  .attr("transform","translate(50,50)")
                  .append('text')
                    .attr('x',220)
                    .attr('y',550)
                    .text('10 or more cylinders')
                    .attr("alignment-baseline","middle")
                
                
                
               // }
            </script>
    </body>
</html>
